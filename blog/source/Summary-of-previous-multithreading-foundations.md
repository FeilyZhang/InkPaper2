title: "对前面多线程基础的总结"
date: 2018-12-21 18:22:45 +0800
update: 2018-12-21 18:22:45 +0800
author: me
cover: "-/images/java.jpg"
tags:
    - Java Core
preview: 如果多线程不涉及对共享资源的操作，那么就不存在线程安全问题，可能也不需要通信，但是如果线程间有依赖关系(比如生产者消费者问题)，那么必然需要线程间通信(调度)，通过Thread的相关API调度，一个线程阻塞另一个线程运行并相互通知，那么肯定是(本文)第三种方法更好。

---

对共享变量的操作有三种方式：

+ 多线程不同runnable实例类变量实现，通过类变量实现多线程对不同runnable实例间共享变量的操作
+ 多线程相同runnable实例成员变量实现，通过相同runnable实例实现多线程对共享变量的操作
+ 多线程相同类实例成员变量实现，通过相同类实例多线程调用类实例方法实现多线程对共享变量的操作

但是对共享变量的操作会存在线程安全问题，通过加锁可以解决，那么线程安全的对共享变量的操作三种方式如下

+ 多线程不同runnable实例类变量实现，通过类变量实现多线程对不同runnable实例间共享变量的操作，加锁实现线程安全
+ 多线程相同runnable实例成员变量实现，通过相同runnable实例实现多线程对共享变量的操作，加锁实现线程安全
+ 多线程相同类实例成员变量实现，通过相同类实例多线程调用类实例方法实现多线程对共享变量的操作，加锁实现线程安全

以上涉及的是多线程对共享变量的同类型操作，不会涉及到线程间的通信，如果是多线程对共享变量的不同类型的操作，那么就要涉及到线程间的通信，比如典型的生产者与消费者问题，生产队列为空那么就无法消费，生产队列为满，那么无法生产。

假定有两个线程，分别是生产线程与消费线程，那么二者就需要通信，用第三种对共享变量操作的方法更好，共享变量就是队列，通过将操作抽象为一个共享成员与两个队共享成员操作的方法，分别是生产与消费，那么生产者线程与消费者线程分别使用相同的类实例，一个调用生产方法，一个调用消费方法即可

如果生产者有多个线程，那么也需要调度，notifyAll与while、wait。

如果多线程不涉及对共享资源的操作，那么就不存在线程安全问题，可能也不需要通信，但是如果线程间有依赖关系(比如生产者消费者问题)，那么必然需要线程间通信(调度)，通过Thread的相关API调度，一个线程阻塞另一个线程运行并相互通知，那么肯定是第三种方法更好。